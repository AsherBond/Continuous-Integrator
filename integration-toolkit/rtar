#!/bin/bash
# Asher Bond 2011
# rtar remotely archives a local directory
# https://github.com/AsherBond/Continuous-Integrator/
# LICENSE: AGPL version 3
# USAGE: rtar </directory/to/archive> <destination-user> <destination.host> <port> <outfile.tar>

dir=$1
user=$2
desthost=$3
port=$4
outfile=$5

(cd $dir ; tar cpf - .) |ssh -l $user $desthost $port dd of=$outfile obs=1024
